const collectionItems=document.querySelector(".items__wrapper"),collectionItems2=document.querySelector(".goods__wrapper"),collectionItems3=document.querySelector(".wrapper__catalog"),goodsCountPanel=document.querySelector(".goods__count-panel"),afterAddGoods=document.querySelector(".success__purchase"),goodsName=document.querySelector(".goods__name"),goodsPrice=document.querySelector(".goods__price"),goodsImg=document.querySelector(".goods-i"),countGoods=document.getElementById("count-goods"),sumaPayElement=document.querySelector(".shopcart-suma"),catalog=document.querySelector(".button__collection");let sumaPay=0,dataObj={price:0,count:1};function clickOnItemForBuy(e){let t,n;e.target.classList.contains("button__buy-goods")&&(document.querySelector(".shopcart").classList.remove("shopcart_active"),$("#catalog").fadeOut("fast"),n=e.target.previousElementSibling.firstElementChild.innerHTML,n=Number(n.split(" ").join("")),goodsPrice.innerHTML=n,goodsName.innerHTML=e.target.previousElementSibling.previousElementSibling.innerHTML,t=e.target.previousElementSibling.previousElementSibling.previousElementSibling.firstElementChild.firstElementChild.nextElementSibling.getAttribute("src"),goodsImg.src=t,goodsImg.previousElementSibling.setAttribute("srcset",t),setTimeout(()=>{$("#overlay, #buy__window").fadeIn("slow")},300),dataObj.price=n,document.querySelector(".buy__window").addEventListener("click",(function(e){if(e.target.classList.contains("goods-plus")&&(e.target.previousElementSibling.innerHTML++,dataObj.count++,goodsPrice.innerHTML=dataObj.price*e.target.previousElementSibling.innerHTML),e.target.classList.contains("goods-minus")&&1!=e.target.nextElementSibling.innerHTML&&(e.target.nextElementSibling.innerHTML--,dataObj.count--,goodsPrice.innerHTML-=dataObj.price),e.target.classList.contains("button__sumbit-goods")){countGoods.innerHTML=Number(countGoods.innerHTML)+Number(e.target.previousElementSibling.firstElementChild.nextElementSibling.innerHTML),Number(countGoods.innerHTML)>9&&(countGoods.style.right="7px");let n=document.querySelector(".shop-item").cloneNode(!0);n.firstElementChild.firstElementChild.firstElementChild.setAttribute("srcset",t),n.firstElementChild.firstElementChild.firstElementChild.nextElementSibling.setAttribute("src",t),n.firstElementChild.nextElementSibling.firstElementChild.innerHTML="Название: "+goodsName.innerHTML,n.firstElementChild.nextElementSibling.firstElementChild.nextElementSibling.innerHTML="Сумма: "+dataObj.price*dataObj.count+" грн.",n.firstElementChild.nextElementSibling.firstElementChild.nextElementSibling.nextElementSibling.innerHTML="Количество: "+dataObj.count+" шт.",n.classList.add("shop-item_added"),document.querySelector(".shop__items-wrapper").appendChild(n),sumaPay+=dataObj.price*dataObj.count,sumaPayElement.innerHTML="Сумма к оплате: "+sumaPay+" грн.",sumaPay>0&&$(".checkout").fadeIn(),dataObj.count=1,closeOverlay(),setTimeout(()=>{$("#overlay, #success__purchase").fadeIn("slow")},300)}e.stopImmediatePropagation()})),e.stopImmediatePropagation())}collectionItems.addEventListener("click",clickOnItemForBuy),collectionItems2.addEventListener("click",clickOnItemForBuy),collectionItems3.addEventListener("click",clickOnItemForBuy),afterAddGoods.addEventListener("click",(function(e){e.target.classList.contains("button-yes")?$("#overlay,#success__purchase").fadeOut("slow"):e.target.classList.contains("button-no")&&($("#overlay,#success__purchase").fadeOut("slow"),document.querySelector(".shopcart").classList.add("shopcart_active"))})),catalog.addEventListener("click",(function(){$("#overlay, #catalog").fadeIn("slow")}));